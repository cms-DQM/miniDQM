<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Create and update THStack object</title>
  </head>
  <body>
    <h3>THStack nostack;hist</h3>
    <div id="id_stack" style="width: 800px; height: 600px"></div>

    <h3>hist</h3>
    <div id="id_hist" style="width: 800px; height: 600px"></div>
  </body>

  <script type="module">
    /* TODO change fName */
    /* Ref: https://root.cern/js/latest/api.htm#custom_html_thstack_src */
    /* Color arrange https://root.cern/js/latest/api.htm#custom_html_adopt_colors_src */
    /* fancy tLegend https://root.cern/js/dev/examples.htm#candle_stack */

    import {
      create,
      draw,
      drawingJSON,
      parse,
      redraw,
      createTHStack,
    } from "https://root.cern/js/latest/modules/main.mjs";
    import { adoptRootColors } from "https://root.cern/js/latest/modules/base/colors.mjs";

    const histsJson = `[{"_typename":"TH1F","fUniqueID":0,"fBits":262152,"fName":"effic_pfjeteta","fTitle":"Jet efficiency vs #eta","fLineColor":602,"fLineStyle":1,"fLineWidth":1,"fFillColor":0,"fFillStyle":1001,"fMarkerColor":1,"fMarkerStyle":1,"fMarkerSize":1,"fNcells":52,"fXaxis":{"_typename":"TAxis","fUniqueID":0,"fBits":0,"fName":"xaxis","fTitle":" PF Jet #eta","fNdivisions":510,"fAxisColor":1,"fLabelColor":1,"fLabelFont":42,"fLabelOffset":0.005,"fLabelSize":0.035,"fTickLength":0.03,"fTitleOffset":1,"fTitleSize":0.035,"fTitleColor":1,"fTitleFont":42,"fNbins":50,"fXmin":-5,"fXmax":5,"fXbins":[],"fFirst":0,"fLast":0,"fBits2":0,"fTimeDisplay":false,"fTimeFormat":"","fLabels":null,"fModLabs":null},"fYaxis":{"_typename":"TAxis","fUniqueID":0,"fBits":0,"fName":"yaxis","fTitle":" efficiency","fNdivisions":510,"fAxisColor":1,"fLabelColor":1,"fLabelFont":42,"fLabelOffset":0.005,"fLabelSize":0.035,"fTickLength":0.03,"fTitleOffset":0,"fTitleSize":0.035,"fTitleColor":1,"fTitleFont":42,"fNbins":1,"fXmin":0,"fXmax":1,"fXbins":[],"fFirst":0,"fLast":0,"fBits2":0,"fTimeDisplay":false,"fTimeFormat":"","fLabels":null,"fModLabs":null},"fZaxis":{"_typename":"TAxis","fUniqueID":0,"fBits":0,"fName":"zaxis","fTitle":"","fNdivisions":510,"fAxisColor":1,"fLabelColor":1,"fLabelFont":42,"fLabelOffset":0.005,"fLabelSize":0.035,"fTickLength":0.03,"fTitleOffset":1,"fTitleSize":0.035,"fTitleColor":1,"fTitleFont":42,"fNbins":1,"fXmin":0,"fXmax":1,"fXbins":[],"fFirst":0,"fLast":0,"fBits2":0,"fTimeDisplay":false,"fTimeFormat":"","fLabels":null,"fModLabs":null},"fBarOffset":0,"fBarWidth":1000,"fEntries":63851,"fTsumw":0,"fTsumw2":63851,"fTsumwx":-5107.36163998346,"fTsumwx2":212532.115736112,"fMaximum":-1111,"fMinimum":-1111,"fNormFactor":0,"fContour":[],"fSumw2":[0,0,0,0,0,0,0,0,0,0,0,0,0,null,0,6.61519607207968E-7,0,0,0,0,0,0,0,0,1.15574549790308E-7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"fOption":"","fFunctions":{"_typename":"TList","name":"TList","arr":[],"opt":[]},"fBufferSize":0,"fBuffer":[],"fBinStatErrOpt":0,"fStatOverflows":2,"fArray":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.0008136696,0,0,0,0,0,0,0,0,0.0003400204,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{"_typename":"TH1F","fUniqueID":1,"fBits":262152,"fName":"effic_pfjeteta","fTitle":"Jet efficiency vs #eta","fLineColor":602,"fLineStyle":1,"fLineWidth":1,"fFillColor":0,"fFillStyle":1001,"fMarkerColor":1,"fMarkerStyle":1,"fMarkerSize":1,"fNcells":52,"fXaxis":{"_typename":"TAxis","fUniqueID":0,"fBits":0,"fName":"xaxis","fTitle":" PF Jet #eta","fNdivisions":510,"fAxisColor":1,"fLabelColor":1,"fLabelFont":42,"fLabelOffset":0.005,"fLabelSize":0.035,"fTickLength":0.03,"fTitleOffset":1,"fTitleSize":0.035,"fTitleColor":1,"fTitleFont":42,"fNbins":50,"fXmin":-5,"fXmax":5,"fXbins":[],"fFirst":0,"fLast":0,"fBits2":0,"fTimeDisplay":false,"fTimeFormat":"","fLabels":null,"fModLabs":null},"fYaxis":{"_typename":"TAxis","fUniqueID":0,"fBits":0,"fName":"yaxis","fTitle":" efficiency","fNdivisions":510,"fAxisColor":1,"fLabelColor":1,"fLabelFont":42,"fLabelOffset":0.005,"fLabelSize":0.035,"fTickLength":0.03,"fTitleOffset":0,"fTitleSize":0.035,"fTitleColor":1,"fTitleFont":42,"fNbins":1,"fXmin":0,"fXmax":1,"fXbins":[],"fFirst":0,"fLast":0,"fBits2":0,"fTimeDisplay":false,"fTimeFormat":"","fLabels":null,"fModLabs":null},"fZaxis":{"_typename":"TAxis","fUniqueID":0,"fBits":0,"fName":"zaxis","fTitle":"","fNdivisions":510,"fAxisColor":1,"fLabelColor":1,"fLabelFont":42,"fLabelOffset":0.005,"fLabelSize":0.035,"fTickLength":0.03,"fTitleOffset":1,"fTitleSize":0.035,"fTitleColor":1,"fTitleFont":42,"fNbins":1,"fXmin":0,"fXmax":1,"fXbins":[],"fFirst":0,"fLast":0,"fBits2":0,"fTimeDisplay":false,"fTimeFormat":"","fLabels":null,"fModLabs":null},"fBarOffset":0,"fBarWidth":1000,"fEntries":121880,"fTsumw":0,"fTsumw2":121880,"fTsumwx":-8528.59612055855,"fTsumwx2":384051.46324029,"fMaximum":-1111,"fMinimum":-1111,"fNormFactor":0,"fContour":[],"fSumw2":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2.56533307002791E-8,0,0,0,7.9193095510827E-8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"fOption":"","fFunctions":{"_typename":"TList","name":"TList","arr":[],"opt":[]},"fBufferSize":0,"fBuffer":[],"fBinStatErrOpt":0,"fStatOverflows":2,"fArray":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.0001601794,0,0,0,0.0002814523,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}]`;
    const c = `{"_typename":"TCanvas","fUniqueID":0,"fBits":3342344,"fLineColor":1,"fLineStyle":1,"fLineWidth":1,"fFillColor":0,"fFillStyle":1001,"fLeftMargin":0.1,"fRightMargin":0.1,"fBottomMargin":0.1,"fTopMargin":0.1,"fXfile":2,"fYfile":2,"fAfile":1,"fXstat":0.99,"fYstat":0.99,"fAstat":2,"fFrameFillColor":0,"fFrameLineColor":1,"fFrameFillStyle":1001,"fFrameLineStyle":1,"fFrameLineWidth":1,"fFrameBorderSize":1,"fFrameBorderMode":0,"fX1":-6.25000009313226,"fY1":-0.000106794148403948,"fX2":6.25000009313226,"fY2":0.00096114727198126,"fXtoAbsPixelk":348.00005,"fXtoPixelk":348.00005,"fXtoPixel":55.6799991703033,"fYtoAbsPixelk":424.800047186661,"fYtoPixelk":424.800047186661,"fYtoPixel":-441971.807620074,"fUtoAbsPixelk":0.00005,"fUtoPixelk":0.00005,"fUtoPixel":696,"fVtoAbsPixelk":472.00005,"fVtoPixelk":472,"fVtoPixel":-472,"fAbsPixeltoXk":-6.25000009313226,"fPixeltoXk":-6.25000009313226,"fPixeltoX":0.017959770382564,"fAbsPixeltoYk":0.00096114727198126,"fPixeltoYk":-0.000106794148403948,"fPixeltoY":-0.00000226258775505341,"fXlowNDC":0,"fYlowNDC":0,"fXUpNDC":1,"fYUpNDC":1,"fWNDC":1,"fHNDC":1,"fAbsXlowNDC":0,"fAbsYlowNDC":0,"fAbsWNDC":1,"fAbsHNDC":1,"fUxmin":-5,"fUymin":0,"fUxmax":5,"fUymax":0.000854353123577312,"fTheta":30,"fPhi":30,"fAspectRatio":0,"fNumber":0,"fTickx":0,"fTicky":0,"fLogx":0,"fLogy":0,"fLogz":0,"fPadPaint":0,"fCrosshair":0,"fCrosshairPos":0,"fBorderSize":2,"fBorderMode":0,"fModified":false,"fGridx":false,"fGridy":false,"fAbsCoord":false,"fEditable":true,"fFixedAspectRatio":false,"fPrimitives":{"_typename":"TList","name":"TList","arr":[{"_typename":"TFrame","fUniqueID":0,"fBits":8,"fLineColor":1,"fLineStyle":1,"fLineWidth":1,"fFillColor":0,"fFillStyle":1001,"fX1":-5,"fY1":0,"fX2":5,"fY2":0.000854353123577312,"fBorderSize":1,"fBorderMode":0},{"_typename":"THStack","fUniqueID":0,"fBits":8,"fName":"","fTitle":"","fHists":{"_typename":"TList","name":"TList","arr":[{"_typename":"TH1F","fUniqueID":0,"fBits":262152,"fName":"effic_pfjeteta","fTitle":"Jet efficiency vs #eta","fLineColor":602,"fLineStyle":1,"fLineWidth":1,"fFillColor":0,"fFillStyle":1001,"fMarkerColor":1,"fMarkerStyle":1,"fMarkerSize":1,"fNcells":52,"fXaxis":{"_typename":"TAxis","fUniqueID":0,"fBits":0,"fName":"xaxis","fTitle":" PF Jet #eta","fNdivisions":510,"fAxisColor":1,"fLabelColor":1,"fLabelFont":42,"fLabelOffset":0.005,"fLabelSize":0.035,"fTickLength":0.03,"fTitleOffset":1,"fTitleSize":0.035,"fTitleColor":1,"fTitleFont":42,"fNbins":50,"fXmin":-5,"fXmax":5,"fXbins":[],"fFirst":0,"fLast":0,"fBits2":0,"fTimeDisplay":false,"fTimeFormat":"","fLabels":null,"fModLabs":null},"fYaxis":{"_typename":"TAxis","fUniqueID":0,"fBits":0,"fName":"yaxis","fTitle":" efficiency","fNdivisions":510,"fAxisColor":1,"fLabelColor":1,"fLabelFont":42,"fLabelOffset":0.005,"fLabelSize":0.035,"fTickLength":0.03,"fTitleOffset":0,"fTitleSize":0.035,"fTitleColor":1,"fTitleFont":42,"fNbins":1,"fXmin":0,"fXmax":1,"fXbins":[],"fFirst":0,"fLast":0,"fBits2":0,"fTimeDisplay":false,"fTimeFormat":"","fLabels":null,"fModLabs":null},"fZaxis":{"_typename":"TAxis","fUniqueID":0,"fBits":0,"fName":"zaxis","fTitle":"","fNdivisions":510,"fAxisColor":1,"fLabelColor":1,"fLabelFont":42,"fLabelOffset":0.005,"fLabelSize":0.035,"fTickLength":0.03,"fTitleOffset":1,"fTitleSize":0.035,"fTitleColor":1,"fTitleFont":42,"fNbins":1,"fXmin":0,"fXmax":1,"fXbins":[],"fFirst":0,"fLast":0,"fBits2":0,"fTimeDisplay":false,"fTimeFormat":"","fLabels":null,"fModLabs":null},"fBarOffset":0,"fBarWidth":1000,"fEntries":63851,"fTsumw":0,"fTsumw2":63851,"fTsumwx":-5107.36163998346,"fTsumwx2":212532.115736112,"fMaximum":-1111,"fMinimum":-1111,"fNormFactor":0,"fContour":[],"fSumw2":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6.61519607207968E-7,0,0,0,0,0,0,0,0,1.15574549790308E-7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"fOption":"","fFunctions":{"_typename":"TList","name":"TList","arr":[],"opt":[]},"fBufferSize":0,"fBuffer":[],"fBinStatErrOpt":0,"fStatOverflows":2,"fArray":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.0008136696,0,0,0,0,0,0,0,0,0.0003400204,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{"_typename":"TH1F","fUniqueID":0,"fBits":262152,"fName":"effic_pfjeteta","fTitle":"Jet efficiency vs #eta","fLineColor":2,"fLineStyle":1,"fLineWidth":1,"fFillColor":0,"fFillStyle":1001,"fMarkerColor":1,"fMarkerStyle":1,"fMarkerSize":1,"fNcells":52,"fXaxis":{"_typename":"TAxis","fUniqueID":0,"fBits":0,"fName":"xaxis","fTitle":" PF Jet #eta","fNdivisions":510,"fAxisColor":1,"fLabelColor":1,"fLabelFont":42,"fLabelOffset":0.005,"fLabelSize":0.035,"fTickLength":0.03,"fTitleOffset":1,"fTitleSize":0.035,"fTitleColor":1,"fTitleFont":42,"fNbins":50,"fXmin":-5,"fXmax":5,"fXbins":[],"fFirst":0,"fLast":0,"fBits2":0,"fTimeDisplay":false,"fTimeFormat":"","fLabels":null,"fModLabs":null},"fYaxis":{"_typename":"TAxis","fUniqueID":0,"fBits":0,"fName":"yaxis","fTitle":" efficiency","fNdivisions":510,"fAxisColor":1,"fLabelColor":1,"fLabelFont":42,"fLabelOffset":0.005,"fLabelSize":0.035,"fTickLength":0.03,"fTitleOffset":0,"fTitleSize":0.035,"fTitleColor":1,"fTitleFont":42,"fNbins":1,"fXmin":0,"fXmax":1,"fXbins":[],"fFirst":0,"fLast":0,"fBits2":0,"fTimeDisplay":false,"fTimeFormat":"","fLabels":null,"fModLabs":null},"fZaxis":{"_typename":"TAxis","fUniqueID":0,"fBits":0,"fName":"zaxis","fTitle":"","fNdivisions":510,"fAxisColor":1,"fLabelColor":1,"fLabelFont":42,"fLabelOffset":0.005,"fLabelSize":0.035,"fTickLength":0.03,"fTitleOffset":1,"fTitleSize":0.035,"fTitleColor":1,"fTitleFont":42,"fNbins":1,"fXmin":0,"fXmax":1,"fXbins":[],"fFirst":0,"fLast":0,"fBits2":0,"fTimeDisplay":false,"fTimeFormat":"","fLabels":null,"fModLabs":null},"fBarOffset":0,"fBarWidth":1000,"fEntries":121880,"fTsumw":0,"fTsumw2":121880,"fTsumwx":-8528.59612055855,"fTsumwx2":384051.46324029,"fMaximum":-1111,"fMinimum":-1111,"fNormFactor":0,"fContour":[],"fSumw2":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2.56533307002791E-8,0,0,0,7.9193095510827E-8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"fOption":"","fFunctions":{"_typename":"TList","name":"TList","arr":[],"opt":[]},"fBufferSize":0,"fBuffer":[],"fBinStatErrOpt":0,"fStatOverflows":2,"fArray":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.0001601794,0,0,0,0.0002814523,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{"_typename":"TH1F","fUniqueID":0,"fBits":262152,"fName":"effic_pfjeteta","fTitle":"Jet efficiency vs #eta","fLineColor":602,"fLineStyle":10,"fLineWidth":1,"fFillColor":0,"fFillStyle":1001,"fMarkerColor":1,"fMarkerStyle":1,"fMarkerSize":1,"fNcells":52,"fXaxis":{"_typename":"TAxis","fUniqueID":0,"fBits":0,"fName":"xaxis","fTitle":" PF Jet #eta","fNdivisions":510,"fAxisColor":1,"fLabelColor":1,"fLabelFont":42,"fLabelOffset":0.005,"fLabelSize":0.035,"fTickLength":0.03,"fTitleOffset":1,"fTitleSize":0.035,"fTitleColor":1,"fTitleFont":42,"fNbins":50,"fXmin":-5,"fXmax":5,"fXbins":[],"fFirst":0,"fLast":0,"fBits2":0,"fTimeDisplay":false,"fTimeFormat":"","fLabels":null,"fModLabs":null},"fYaxis":{"_typename":"TAxis","fUniqueID":0,"fBits":0,"fName":"yaxis","fTitle":" efficiency","fNdivisions":510,"fAxisColor":1,"fLabelColor":1,"fLabelFont":42,"fLabelOffset":0.005,"fLabelSize":0.035,"fTickLength":0.03,"fTitleOffset":0,"fTitleSize":0.035,"fTitleColor":1,"fTitleFont":42,"fNbins":1,"fXmin":0,"fXmax":1,"fXbins":[],"fFirst":0,"fLast":0,"fBits2":0,"fTimeDisplay":false,"fTimeFormat":"","fLabels":null,"fModLabs":null},"fZaxis":{"_typename":"TAxis","fUniqueID":0,"fBits":0,"fName":"zaxis","fTitle":"","fNdivisions":510,"fAxisColor":1,"fLabelColor":1,"fLabelFont":42,"fLabelOffset":0.005,"fLabelSize":0.035,"fTickLength":0.03,"fTitleOffset":1,"fTitleSize":0.035,"fTitleColor":1,"fTitleFont":42,"fNbins":1,"fXmin":0,"fXmax":1,"fXbins":[],"fFirst":0,"fLast":0,"fBits2":0,"fTimeDisplay":false,"fTimeFormat":"","fLabels":null,"fModLabs":null},"fBarOffset":0,"fBarWidth":1000,"fEntries":121880,"fTsumw":0,"fTsumw2":121880,"fTsumwx":-8528.59612055855,"fTsumwx2":384051.46324029,"fMaximum":-1111,"fMinimum":-1111,"fNormFactor":0,"fContour":[],"fSumw2":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2.56533307002791E-8,0,0,0,7.9193095510827E-8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"fOption":"","fFunctions":{"_typename":"TList","name":"TList","arr":[],"opt":[]},"fBufferSize":0,"fBuffer":[],"fBinStatErrOpt":0,"fStatOverflows":2,"fArray":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.0001601794,0,0,0,0.0002814523,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}],"opt":["","",""]},"fHistogram":{"_typename":"TH1F","fUniqueID":0,"fBits":512,"fName":"","fTitle":"","fLineColor":602,"fLineStyle":1,"fLineWidth":0,"fFillColor":0,"fFillStyle":1001,"fMarkerColor":1,"fMarkerStyle":1,"fMarkerSize":1,"fNcells":52,"fXaxis":{"_typename":"TAxis","fUniqueID":0,"fBits":0,"fName":"xaxis","fTitle":"","fNdivisions":510,"fAxisColor":1,"fLabelColor":1,"fLabelFont":42,"fLabelOffset":0.005,"fLabelSize":0.035,"fTickLength":0.03,"fTitleOffset":1,"fTitleSize":0.035,"fTitleColor":1,"fTitleFont":42,"fNbins":50,"fXmin":-5,"fXmax":5,"fXbins":[],"fFirst":0,"fLast":0,"fBits2":0,"fTimeDisplay":false,"fTimeFormat":"","fLabels":null,"fModLabs":null},"fYaxis":{"_typename":"TAxis","fUniqueID":0,"fBits":0,"fName":"yaxis","fTitle":"","fNdivisions":510,"fAxisColor":1,"fLabelColor":1,"fLabelFont":42,"fLabelOffset":0.005,"fLabelSize":0.035,"fTickLength":0.03,"fTitleOffset":0,"fTitleSize":0.035,"fTitleColor":1,"fTitleFont":42,"fNbins":1,"fXmin":0,"fXmax":1,"fXbins":[],"fFirst":0,"fLast":0,"fBits2":0,"fTimeDisplay":false,"fTimeFormat":"","fLabels":null,"fModLabs":null},"fZaxis":{"_typename":"TAxis","fUniqueID":0,"fBits":0,"fName":"zaxis","fTitle":"","fNdivisions":510,"fAxisColor":1,"fLabelColor":1,"fLabelFont":42,"fLabelOffset":0.005,"fLabelSize":0.035,"fTickLength":0.03,"fTitleOffset":1,"fTitleSize":0.035,"fTitleColor":1,"fTitleFont":42,"fNbins":1,"fXmin":0,"fXmax":1,"fXbins":[],"fFirst":0,"fLast":0,"fBits2":0,"fTimeDisplay":false,"fTimeFormat":"","fLabels":null,"fModLabs":null},"fBarOffset":0,"fBarWidth":1000,"fEntries":0,"fTsumw":0,"fTsumw2":0,"fTsumwx":0,"fTsumwx2":0,"fMaximum":0.000854353123577312,"fMinimum":0,"fNormFactor":0,"fContour":[],"fSumw2":[],"fOption":"","fFunctions":{"_typename":"TList","name":"TList","arr":[],"opt":[]},"fBufferSize":0,"fBuffer":[],"fBinStatErrOpt":0,"fStatOverflows":2,"fArray":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},"fMaximum":-1111,"fMinimum":-1111},{"_typename":"TLegend","fUniqueID":0,"fBits":8,"fLineColor":1,"fLineStyle":1,"fLineWidth":1,"fFillColor":0,"fFillStyle":0,"fX1":5.00000007450581,"fY1":0.000640764845865697,"fX2":6.25000009313226,"fY2":0.000854353129942739,"fX1NDC":0.9,"fY1NDC":0.7,"fX2NDC":1,"fY2NDC":0.9,"fBorderSize":0,"fInit":1,"fShadowColor":1,"fCornerRadius":0,"fOption":"brNDC","fName":"TPave","fTextAngle":0,"fTextSize":0.035,"fTextAlign":12,"fTextColor":1,"fTextFont":42,"fPrimitives":{"_typename":"TList","name":"TList","arr":[{"_typename":"TLegendEntry","fUniqueID":0,"fBits":0,"fTextAngle":0,"fTextSize":0,"fTextAlign":0,"fTextColor":0,"fTextFont":42,"fLineColor":602,"fLineStyle":1,"fLineWidth":1,"fFillColor":0,"fFillStyle":0,"fMarkerColor":1,"fMarkerStyle":21,"fMarkerSize":1,"fObject":{"$ref":5},"fLabel":"run-1","fOption":"l"},{"_typename":"TLegendEntry","fUniqueID":0,"fBits":0,"fTextAngle":0,"fTextSize":0,"fTextAlign":0,"fTextColor":0,"fTextFont":42,"fLineColor":2,"fLineStyle":1,"fLineWidth":1,"fFillColor":0,"fFillStyle":0,"fMarkerColor":1,"fMarkerStyle":1,"fMarkerSize":1,"fObject":{"$ref":10},"fLabel":"run-2","fOption":"lep"},{"_typename":"TLegendEntry","fUniqueID":0,"fBits":0,"fTextAngle":0,"fTextSize":0,"fTextAlign":0,"fTextColor":0,"fTextFont":42,"fLineColor":602,"fLineStyle":10,"fLineWidth":1,"fFillColor":0,"fFillStyle":0,"fMarkerColor":1,"fMarkerStyle":21,"fMarkerSize":1,"fObject":{"$ref":15},"fLabel":"run-3","fOption":"l"}],"opt":["l","lep","l"]},"fEntrySeparation":0.1,"fMargin":0.25,"fNColumns":1,"fColumnSeparation":0}],"opt":["","nostack,hist",""]},"fExecs":null,"fName":"c1","fTitle":"c1","fNumPaletteColor":0,"fNextPaletteColor":0,"fDISPLAY":"$DISPLAY","fDoubleBuffer":0,"fRetained":true,"fXsizeUser":0,"fYsizeUser":0,"fXsizeReal":20,"fYsizeReal":14.28571,"fWindowTopX":0,"fWindowTopY":0,"fWindowWidth":0,"fWindowHeight":0,"fCw":696,"fCh":472,"fCatt":{"_typename":"TAttCanvas","fXBetween":2,"fYBetween":2,"fTitleFromTop":1.2,"fXdate":0.2,"fYdate":0.3,"fAdate":1},"kMoveOpaque":true,"kResizeOpaque":true,"fHighLightColor":2,"fBatch":true,"kShowEventStatus":false,"kAutoExec":true,"kMenuBar":true}`
    const histsArr = JSON.parse(histsJson);
    const cobj = parse(c);
    histsArr.push(JSON.parse(histsJson)[0])
    histsArr.push(JSON.parse(histsJson)[1]);
    const stackHists = [];

    function CreateLegendEntry(obj, lbl) {
      let entry = create("TLegendEntry");
      entry.fObject = obj;
      entry.fLabel = lbl;
      entry.fOption = "l";
      entry.fLabelFont = 10;
      return entry;
    }
    const leg = create("TLegend");
    // Defines the font
    Object.assign(leg, { fX1NDC: 0.9, fY1NDC: 0.7, fX2NDC: 1.0, fY2NDC: 0.9 });
    
    histsArr.forEach(function (h, i) {
      let h_parsed = parse(h);
      // console.log("%d: %s", i, JSON.stringify(h));
      h_parsed.fLineColor = i + 1;
      stackHists.push(h_parsed);
      leg.fPrimitives.Add(CreateLegendEntry(h_parsed, "run-" + i));
    });
    histsArr[0].fFunctions.Add(leg, "");

    const stack = createTHStack(...stackHists);
    stack.fTitle = histsArr[0].fTitle + " - fname:" + histsArr[0].fName;

    await draw("id_stack", stack, "nostack,hist");
    await draw("id_hist", cobj, "hist");
    // let json = drawingJSON("id_stack");
  </script>
</html>
